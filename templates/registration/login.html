{% extends 'base.html' %}
{% load static %}
{% block title %}Sign in{% endblock %}
{% block content %}
  {% if request.user.is_authenticated %}
    <script>window.location.href = '/users/profile/'; </script>
  {% endif %}
  <style>.errorlist{color:red;}</style>
  <main role="main">
    <div class="container">
      <div class="row mt-3">
        <div class="col-md-9 mx-auto mb-5">
          {% if 'register' in request.GET %}
            <p style="color:green;">User registered successfully.</p>
          {% endif %}
          <form action="" method="post">{% csrf_token %}
            <h3 class="mb-4">Sign in</h3>
            {% if form.non_field_errors %}
              <p style="color:red">Invalid username or password, please try again.</p>
            {% endif %}
            <p>
              <input type="text" name="username" autofocus maxlength="254" required
                id="id_username" class="form-control" placeholder="Username"/>
            </p>
            <p>
              <input type="password" name="password" required
                id="id_password" class="form-control" placeholder="Password"/>
            </p>
            <p><input type="submit" class="btn btn-primary btn-block" value="Access"></p>
          </form>
          <p>
            Forgot your password? You can reset it <a href="{% url 'password_reset' %}">here</a>.
          </p>
        </div>
      </div>
    </div>
  </main>
{% endblock %}