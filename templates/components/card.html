{% load static %}
<article class="card-wrapper">
  {% if product.is_new %}
  <span class="tag-absolute">New</span>
  {% endif %}
  <a href="{% url 'products:detail' product.pk %}" title="{{ product.title }}">
    {% if product.image %}
    <img class="card-image" src="{{ product.image.url }}" title="{{ product.title }}" alt="{{ product.title|lower }}" />
    {% else %}
    <img class="card-image" src="{% static 'img/default-image-front.webp' %}" title="{{ product.title }}" alt="{{ product.title|lower }}" />
    {% endif %}
  </a>
  <div class="card-content">
    <div>
      {% if product.deal %}
      <span class="card-price-d">${{ product.price_with_discount|floatformat:2 }}</span>
      <span class="card-price-nt">${{ product.normal_price }}</span>
      {% endif %}
      {% if not product.deal %}
      <span class="card-price-n">${{ product.normal_price }}</span>
      {% endif %}
    </div>
    <div>
      <a href="{% url 'cart:add_prod_wishlist' product.id %}" title="Add to wishlist" class="icon" aria-label="Add to wishlist">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
        </svg>
      </a>
    </div>
  </div>
  <div class="card-title">
    <a href="{% url 'products:detail' product.pk %}" title="{{ product.title }}">
      <span class="hover:underline">{{ product.title|truncatechars:40 }}</span>
    </a>
  </div>
  <a href="{% url 'cart:add_prod_cart' product.id %}" title="Add to cart" class="card-btn">
    Add to cart
  </a>
</article>